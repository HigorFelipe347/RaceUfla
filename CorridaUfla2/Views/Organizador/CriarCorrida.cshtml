@model CorridaUfla2.Models.Corrida
@{
    var meusKits = ViewBag.MeusKits as List<CorridaUfla2.Models.Kit>;
}

<div class="container mt-4">
    <h2>Nova Corrida</h2>

    <form asp-action="CriarCorrida" method="post" enctype="multipart/form-data">

        <div asp-validation-summary="All" class="text-danger mb-3"></div>

        <div class="row">
            <div class="col-md-6 mb-2">
                <label asp-for="Nome" class="form-label"></label>
                <input asp-for="Nome" class="form-control" required />
                <span asp-validation-for="Nome" class="text-danger"></span>
            </div>

            <div class="col-md-3 mb-2">
                <label asp-for="DataInicio" class="form-label"></label>
                <input asp-for="DataInicio" class="form-control" type="date" required />
                <span asp-validation-for="DataInicio" class="text-danger"></span>
            </div>

            <div class="col-md-3 mb-2">
                <label asp-for="HorarioLargada" class="form-label"></label>
                <input asp-for="HorarioLargada" class="form-control" type="time" required />
                <span asp-validation-for="HorarioLargada" class="text-danger"></span>
            </div>

            <div class="col-md-12 mb-2">
                <label asp-for="Descricao" class="form-label"></label>
                <textarea asp-for="Descricao" class="form-control"></textarea>
                <span asp-validation-for="Descricao" class="text-danger"></span>
            </div>

            <h5 class="mt-3">Endereço</h5>

            <div class="col-md-6 mb-2">
                <label asp-for="Cidade" class="form-label"></label>
                <input asp-for="Cidade" class="form-control" required />
                <span asp-validation-for="Cidade" class="text-danger"></span>
            </div>

            <div class="col-md-6 mb-2">
                <label asp-for="Bairro" class="form-label"></label>
                <input asp-for="Bairro" class="form-control" />
                <span asp-validation-for="Bairro" class="text-danger"></span>
            </div>

            <div class="col-md-9 mb-2">
                <label asp-for="Logradouro" class="form-label"></label>
                <input asp-for="Logradouro" class="form-control" />
                <span asp-validation-for="Logradouro" class="text-danger"></span>
            </div>

            <div class="col-md-3 mb-2">
                <label asp-for="Numero" class="form-label"></label>
                <input asp-for="Numero" class="form-control" />
                <span asp-validation-for="Numero" class="text-danger"></span>
            </div>

            <div class="col-md-4 mb-2">
                <label asp-for="DistanciaKm" class="form-label"></label>
                <input asp-for="DistanciaKm" class="form-control" />
                <span asp-validation-for="DistanciaKm" class="text-danger"></span>
            </div>

            <div class="col-md-4 mb-2">
                <label asp-for="MaximoParticipantes" class="form-label"></label>
                <input asp-for="MaximoParticipantes" class="form-control" />
                <span asp-validation-for="MaximoParticipantes" class="text-danger"></span>
            </div>

            <div class="col-md-4 mb-2">
                <label asp-for="ArquivoImagem" class="form-label">Mapa</label>
                <input asp-for="ArquivoImagem" class="form-control" type="file" />
            </div>
        </div>

        <h4 class="mt-4">Kits disponíveis:</h4>

        @if (meusKits?.Count > 0)
        {
            <div class="row">
                @foreach (var k in meusKits)
                {
                    <div class="col-md-3 mb-3">
                        <div class="card p-2 shadow-sm">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="KitsSelecionados" value="@k.Id" id="kit@k.Id" />
                                <label class="form-check-label fw-bold" for="kit@k.Id">@k.Nome (R$ @k.Preco)</label>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="alert alert-warning">Você ainda não cadastrou kits.</div>
        }

        <button class="btn btn-success mt-3 w-100">Publicar Corrida</button>

    </form>
</div>
